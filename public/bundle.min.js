!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="https://pmrt.github.io/webmarks/public/",i(i.s=0)}([function(t,e,i){i(1),i(3),i(4),t.exports=i(5)},function(t,e,i){"use strict";i.r(e);i(2);window.onload=function(){const t={alwaysVisible:!0,renderSizes:!0},e=[{opts:{...t,stickVisibilityTo:document.getElementById("demo-1")},elements:document.getElementsByClassName("step-title")},{opts:{...t,stickVisibilityTo:document.getElementById("demo-2"),classes:{wrapper:["webmarks","thread-webmarks"],mark:["webmark","thread-webmark"]}},elements:document.getElementsByClassName("parent")},{opts:{...t,stickVisibilityTo:document.getElementById("demo-3"),classes:{wrapper:["webmarks","article-webmarks"],mark:["webmark","article-webmark"]}},elements:document.getElementsByClassName("snippet")}],i=e.length;window.__webmarks__instances__=new Array(i);for(let t=0;t<i;t++){const i=e[t];window.__webmarks__instances__[t]=new Webmarks(i.elements,i.opts)}}},function(t,e){!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function n(t,e,i){if("complete"===document.readyState)setTimeout(()=>{t.apply(i,e)},0);else{const n=function(){document.removeEventListener("DOMContentLoaded",n),t.apply(i,e)};document.addEventListener("DOMContentLoaded",n)}}function s(t,e,i){for(let n=0,s=t.length;n<s;n++)e.call(i,n,t[n],t)}function o(t){return t instanceof Element}function r(t,e,i){let n,s;function o(){t.apply(i,s),n=s=void 0}return(...t)=>{t=t,n&&clearTimeout(n),n=setTimeout(o,e)}}i.r(e);let l={};function c(t){return t/l.height*window.innerHeight}function a(t){return function(t,e,i){const[n,s]=t,[o,r]=e;return(i-n)*(r-o)/(s-n)+o}([0,l.height],[0,window.innerHeight],t)}function u(t,e){let i=new Array(t.length);return s(t,void 0===e[0]?function(t,n){const s=n.getBoundingClientRect();let o=window.scrollY+s.top;e[t]={top:o,height:s.height},i[t]=h(o,s.height)}:function(t){const n=e[t];i[t]=h(n.top,n.height)}),i}function h(t,e){return{top:a(t),height:c(e)}}n((function(){l.height=function(){let t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}()})),i.d(e,"Webmarks",(function(){return w}));const d=()=>{},p=0!=window.scrollY,m=500,f={classes:{wrapper:["webmarks"],mark:["webmark"]},alwaysVisible:!1,hideAfter:500,renderSizes:!1,onNewMark:d,onUpdateMark:d,onCreation:d,onUpdate:d,beforeCreation:d,beforeUpdate:d,stickVisibilityTo:null,opacityTransition:100};class w{constructor(t,e){this._onScroll=this._onScroll.bind(this),this._onStickyScroll=this._onStickyScroll.bind(this),this._onStickyAlwaysShowScroll=this._onStickyAlwaysShowScroll.bind(this);try{n(this._init,[t,e],this)}catch(t){console.error(t)}}get visible(){return!!parseInt(this.wrapper.style.opacity)}set visible(t){this.wrapper.style.opacity=t>>>0}_init(t,e){this._setup(t,e),this._createMarks()}_setup(t,e){if(!t)throw new TypeError("Elements array can't be empty");let i=t[0];if(!o(i))throw new TypeError(JSON.stringify(i)+" (first element of the given elements) is not an HTMLElement");this.elems=t,this.cachedElemRects=new Array(t.length),this.opts={...f,...e},function(t,e){let i=document.createElement("style");if(document.getElementById(e))return null;i.setAttribute("id",e),i.setAttribute("type","text/css"),i.innerText=t;const n=document.getElementsByTagName("link");if(0!==n.length){const t=n[0];document.head.insertBefore(i,t)}else document.head.appendChild(i)}(`.${this.opts.classes.wrapper}{`+"position:fixed;top:0;right:0;bottom:0;"+`transition: opacity ${this.opts.opacityTransition}ms;`+"}"+`.${this.opts.classes.mark}{`+"position:absolute;background:#333;right:0;}","webmarks--style"),this._createWrapper();const n=this.opts.stickVisibilityTo;this.opts.alwaysVisible?n&&(this.visible=!1,this._computeStickToBounding(n),this._onStickyAlwaysShowScroll(),document.addEventListener("scroll",()=>{window.requestAnimationFrame(this._onStickyAlwaysShowScroll)})):(this.visible=p,this.hideAfterScroll=r(this.hide,this.opts.hideAfter,this),n?(this._computeStickToBounding(n),document.addEventListener("scroll",()=>{window.requestAnimationFrame(this._onStickyScroll)})):document.addEventListener("scroll",()=>{window.requestAnimationFrame(this._onScroll)})),this.updateAfterResize=r(this._updateMarks,m,this),window.addEventListener("resize",()=>{window.requestAnimationFrame(this.updateAfterResize)})}show(){this.visible=!0}hide(){this.visible=!1}isOutside(){const t=window.scrollY;return t<this.stickTop||this.stickBottom<t}_createWrapper(){const t=this.wrapper=document.createElement("div");s(this.opts.classes.wrapper,(e,i)=>{t.classList.add(i)}),document.body.insertBefore(t,document.body.firstChild)}_createMarks(){const t=u(this.elems,this.cachedElemRects);this.marks=new Array(t.length),this.opts.beforeCreation(this.wrapper),s(t,(t,e)=>{const i=this.marks[t]=document.createElement("div");s(this.opts.classes.mark,(t,e)=>{i.classList.add(e)}),i.style.top=e.top+"px",this.opts.renderSizes&&(i.style.height=e.height+"px"),this.wrapper.appendChild(i),this.opts.onNewMark(i,this.wrapper)}),this.opts.onCreation(this.marks,this.wrapper)}_updateMarks(){const t=u(this.elems,this.cachedElemRects);this.opts.beforeUpdate(this.wrapper),s(t,(t,e)=>{const i=this.marks[t];i.style.top=e.top+"px",this.opts.onUpdateMark(i,this.wrapper)}),this.opts.onUpdate(this.marks,this.wrapper)}_computeStickToBounding(t){if(!o(t))throw new TypeError(JSON.stringify(t)+"(stickVisibilityTo) is not an HTMLElement");const e=t.getBoundingClientRect();this.stickTop=e.top+window.scrollY,this.stickBottom=this.stickTop+e.height}_onScroll(){this.visible?this.hideAfterScroll():this.show()}_onStickyScroll(){this.isOutside()&&!this.visible||(!this.isOutside()&&this.visible?this.hideAfterScroll():this.visible?this.hide():this.show())}_onStickyAlwaysShowScroll(){this.isOutside()&&!this.visible||!this.isOutside()&&this.visible||(this.isOutside()?this.hide():this.show())}}window.Webmarks=w}])},function(t,e,i){},function(t,e,i){},function(t,e,i){}]);